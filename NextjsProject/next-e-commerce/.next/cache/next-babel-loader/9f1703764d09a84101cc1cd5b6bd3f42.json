{"ast":null,"code":"import { firebase, auth, db } from \"../config/firebase\";\n\nfunction updateUser(_ref) {\n  var email = _ref.email,\n      name = _ref.name,\n      surname = _ref.surname,\n      phoneNumber = _ref.phoneNumber,\n      photo = _ref.photo,\n      finalEvent = _ref.finalEvent;\n  var currentUser = auth.currentUser.uid;\n\n  if (photo) {\n    return firebase.storage().ref(\"images/\" + currentUser + ((photo === null || photo === void 0 ? void 0 : photo.name) || \"0\")).put(photo).then(function (doc) {\n      doc.ref.getDownloadURL().then(function (url) {\n        db.collection(\"Users\").doc(currentUser).update({\n          name: name,\n          surname: surname,\n          email: email,\n          phoneNumber: phoneNumber || \"\",\n          photoUrl: url\n        })[\"catch\"](function (e) {\n          return console.log(e);\n        })[\"finally\"](function () {\n          return finalEvent();\n        });\n      });\n    })[\"catch\"](function (e) {\n      return console.log(e);\n    });\n  }\n\n  return db.collection(\"Users\").doc(currentUser).update({\n    name: name,\n    surname: surname,\n    email: email,\n    phoneNumber: phoneNumber || \"\"\n  });\n}\n\nfunction updatePassword(_ref2) {\n  var currentPassword = _ref2.currentPassword,\n      newPassword = _ref2.newPassword;\n  var currentUser = auth.currentUser;\n  var credential = firebase.auth.EmailAuthProvider.credential(firebase.auth().currentUser.email, currentPassword);\n\n  var update = function update() {\n    return currentUser.updatePassword(newPassword).then(function () {// Update successful.\n    })[\"catch\"](function (error) {// An error happened.\n    });\n  };\n\n  var reauth = function reauth() {\n    return currentUser.reauthenticateWithCredential(credential);\n  };\n\n  return {\n    reauth: reauth,\n    update: update\n  };\n}\n\nexport { updateUser, updatePassword };","map":null,"metadata":{},"sourceType":"module"}