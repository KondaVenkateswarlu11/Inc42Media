{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[15],{\"5xsU\":function(e,n,a){\"use strict\";a.r(n),a.d(n,\"default\",(function(){return w}));var r=a(\"nKUr\"),s=a(\"q1tI\"),t=a(\"NKCw\"),o=a(\"bgvd\"),c=a(\"UGp+\"),i=a(\"HvpM\"),l=a(\"C6+i\"),u=a.n(l),d=a(\"vgGx\"),m=a(\"G9T2\"),j=a(\"Wc11\"),h=a(\"co3k\"),b=a(\"xvJW\");var p=a(\"nOHt\"),O=c.a().shape({name:c.c().required(\"* Name is required.\").min(2,\"* Name is too short\"),surname:c.c().required(\"* Surname is required.\").min(2,\"* Surname is too short\"),email:c.c().email().required(\"* Email is required.\"),phone:c.c().notRequired().matches(/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\\s\\./0-9]*$/g,{message:\"Invalid Phone Number\",excludeEmptyString:!0})}),x=c.a().shape({currentPassword:c.c().required(\"* Current Password is required.\").min(8,\"* Password is too short - should be 8 chars minimum.\"),newPassword:c.c().required(\"* New Password is required.\").min(8,\"* Password is too short - should be 8 chars minimum.\"),confirmPassword:c.c().oneOf([c.b(\"newPassword\"),null],\"Passwords must match\")});function w(){var e=Object(s.useState)(null),n=e[0],a=e[1],c=Object(s.useState)(null),l=c[0],w=c[1],f=Object(i.b)(),g=f.user,_=f.loading,v=Object(t.useForm)({resolver:Object(o.yupResolver)(O)}),N=v.register,P=v.handleSubmit,C=(v.watch,v.errors),y=Object(t.useForm)({resolver:Object(o.yupResolver)(x)}),S=y.register,q=y.handleSubmit,U=y.errors;y.getValues;return g||_||Object(p.useRouter)().push(\"/login\"),Object(r.jsxs)(m.a,{noCategories:!0,children:[Object(r.jsx)(d.a,{}),Object(r.jsxs)(\"main\",{className:u.a.container,children:[Object(r.jsx)(\"h1\",{className:u.a.title,children:\"My Account\"}),Object(r.jsxs)(\"div\",{className:u.a.content,children:[Object(r.jsxs)(\"div\",{className:u.a.accountContainer,children:[Object(r.jsx)(\"h4\",{children:\"Account Details\"}),Object(r.jsxs)(\"form\",{onSubmit:P((function(e){!function(e){var n=e.email,a=e.name,r=e.surname,s=e.phoneNumber,t=e.photo,o=e.finalEvent,c=b.a.currentUser.uid;t?b.c.storage().ref(\"images/\"+c+((null===t||void 0===t?void 0:t.name)||\"0\")).put(t).then((function(e){e.ref.getDownloadURL().then((function(e){b.b.collection(\"Users\").doc(c).update({name:a,surname:r,email:n,phoneNumber:s||\"\",photoUrl:e}).catch((function(e){return console.log(e)})).finally((function(){return o()}))}))})).catch((function(e){return console.log(e)})):b.b.collection(\"Users\").doc(c).update({name:a,surname:r,email:n,phoneNumber:s||\"\"})}({email:e.email,phone:e.phone,name:e.name,surname:e.surname,photo:l,finalEvent:function(){return window.location.reload(!1)}})})),children:[Object(r.jsxs)(\"div\",{className:u.a.inputContainer,children:[Object(r.jsx)(\"span\",{children:\"Name\"}),Object(r.jsx)(j.a,{name:\"name\",defaultValue:null===g||void 0===g?void 0:g.name,noMargin:!0,register:N,placeholder:\"Name\",error:C.name})]}),C.name&&Object(r.jsx)(\"span\",{style:{color:\"red\",marginTop:4,fontSize:14},children:C.name.message}),Object(r.jsxs)(\"div\",{className:u.a.inputContainer,children:[Object(r.jsx)(\"span\",{children:\"Surname\"}),Object(r.jsx)(j.a,{name:\"surname\",defaultValue:null===g||void 0===g?void 0:g.surname,noMargin:!0,register:N,placeholder:\"Surname\",error:C.surname})]}),C.surname&&Object(r.jsx)(\"span\",{style:{color:\"red\",marginTop:4,fontSize:14},children:C.surname.message}),Object(r.jsxs)(\"div\",{className:u.a.inputContainer,children:[Object(r.jsx)(\"span\",{children:\"Email\"}),Object(r.jsx)(j.a,{name:\"email\",defaultValue:null===g||void 0===g?void 0:g.email,noMargin:!0,register:N,placeholder:\"E-mail\",error:C.email})]}),C.email&&Object(r.jsx)(\"span\",{style:{color:\"red\",marginTop:4,fontSize:14},children:C.email.message}),Object(r.jsxs)(\"div\",{className:u.a.inputContainer,children:[Object(r.jsx)(\"span\",{children:\"Phone Number\"}),Object(r.jsx)(j.a,{name:\"phone\",defaultValue:null===g||void 0===g?void 0:g.phoneNumber,noMargin:!0,register:N,error:C.phone})]}),C.phone&&Object(r.jsx)(\"span\",{style:{color:\"red\",marginTop:4,fontSize:14},children:C.phone.message}),Object(r.jsxs)(\"div\",{className:u.a.inputContainer,children:[Object(r.jsx)(\"span\",{children:\"Profile Photo\"}),Object(r.jsxs)(\"label\",{className:u.a.uploadButton,children:[Object(r.jsx)(\"input\",{type:\"file\",onChange:function(e){return w(e.target.files[0])},accept:\"image/*\",style:{display:\"none\"}}),(null===l||void 0===l?void 0:l.name)||\"Select File\"]})]}),Object(r.jsx)(h.a,{type:\"submit\",name:\"update_button\",value:\"Update\",children:\"Update\"})]},\"account-form\")]}),Object(r.jsx)(\"hr\",{}),Object(r.jsxs)(\"div\",{className:u.a.passwordContainer,children:[Object(r.jsx)(\"h4\",{children:\"Change Password\"}),Object(r.jsxs)(\"form\",{onSubmit:q((function(e){var n=function(e){var n=e.currentPassword,a=e.newPassword,r=b.a.currentUser,s=b.c.auth.EmailAuthProvider.credential(b.c.auth().currentUser.email,n);return{reauth:function(){return r.reauthenticateWithCredential(s)},update:function(){return r.updatePassword(a).then((function(){})).catch((function(e){}))}}}({currentPassword:e.currentPassword,newPassword:e.newPassword}),r=n.reauth,s=n.update;r().then((function(){return s().then((function(){return a(\"Password Changed!\")})).catch((function(e){return a(e.message)}))})).catch((function(e){return a(e.message)}))})),children:[Object(r.jsxs)(\"div\",{className:u.a.inputContainer,children:[Object(r.jsx)(\"span\",{children:\"Current Password\"}),Object(r.jsx)(j.a,{name:\"currentPassword\",register:S,placeholder:\"Current Password\",noMargin:!0})]}),Object(r.jsxs)(\"div\",{className:u.a.inputContainer,children:[Object(r.jsx)(\"span\",{children:\"New Password\"}),Object(r.jsx)(j.a,{name:\"newPassword\",register:S,placeholder:\"New Password\",noMargin:!0})]}),U.newPassword&&Object(r.jsx)(\"span\",{style:{color:\"red\",marginTop:4,fontSize:14},children:U.newPassword.message}),Object(r.jsxs)(\"div\",{className:u.a.inputContainer,children:[Object(r.jsx)(\"span\",{children:\"Confirm New Password\"}),Object(r.jsx)(j.a,{name:\"confirmPassword\",register:S,placeholder:\"Confirm New Password\",noMargin:!0})]}),U.confirmPassword&&Object(r.jsx)(\"span\",{style:{color:\"red\",marginTop:4,fontSize:14},children:U.confirmPassword.message}),n&&Object(r.jsx)(\"span\",{style:{color:\"Password Changed!\"===n?\"black\":\"red\",marginTop:4,fontSize:14},children:n}),Object(r.jsx)(h.a,{type:\"submit\",name:\"password_button\",value:\"Change Password\",children:\"Confirm\"})]},\"password-form\")]})]})]})]})}},\"C6+i\":function(e,n,a){e.exports={container:\"account_container__1UwWH\",title:\"account_title__2vBOn\",content:\"account_content__2nplY\",accountContainer:\"account_accountContainer__3zPOR\",passwordContainer:\"account_passwordContainer__3vBeH\",inputContainer:\"account_inputContainer__2c42O\",uploadButton:\"account_uploadButton__gJTq2\"}},owYu:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/account\",function(){return a(\"5xsU\")}])},qO9p:function(e,n,a){e.exports={container:\"sidebar_container__1Q1WF\",title:\"sidebar_title__8opfW\",categories:\"sidebar_categories__1jgND\",sidebarItem:\"sidebar_sidebarItem__1UuRg\",emoji:\"sidebar_emoji__yH9m8\",helpContainer:\"sidebar_helpContainer__2Du0F\",helpIcon:\"sidebar_helpIcon__3gHpn\"}},vgGx:function(e,n,a){\"use strict\";a.d(n,\"a\",(function(){return d}));var r=a(\"nKUr\"),s=(a(\"q1tI\"),a(\"qO9p\")),t=a.n(s),o=a(\"YFqc\"),c=a.n(o),i=a(\"H5F+\"),l=a(\"HvpM\"),u=function(e){var n=e.name,a=e.link,s=e.emoji;return Object(r.jsx)(\"li\",{className:t.a.sidebarItem,children:Object(r.jsx)(c.a,{href:a||\"/account\",children:Object(r.jsxs)(\"a\",{children:[Object(r.jsx)(\"span\",{className:t.a.emoji,children:s}),Object(r.jsx)(\"span\",{className:t.a.categoryName,children:n})]})})})};function d(){Object(l.b)().user;return Object(r.jsxs)(\"div\",{className:t.a.container,children:[Object(r.jsx)(\"h2\",{className:t.a.title,children:\"Menu\"}),Object(r.jsxs)(\"ul\",{className:t.a.categories,children:[Object(r.jsx)(u,{name:\"Account\",emoji:\"\\ud83d\\udd12\"}),Object(r.jsx)(u,{name:\"Orders\",emoji:\"\\ud83d\\udce6\",link:\"/account/orders\"}),Object(r.jsx)(u,{name:\"Favorites\",emoji:\"\\u2764\\ufe0f\",link:\"/account/favorites\"}),Object(r.jsx)(u,{name:\"Addresses\",emoji:\"\\ud83c\\udfd8\\ufe0f\",link:\"/account/addresses\"}),Object(r.jsx)(u,{name:\"Logout\",emoji:\"\\ud83d\\udeaa\",link:\"/account/logout\"})]}),Object(r.jsxs)(\"div\",{className:t.a.helpContainer,children:[Object(r.jsx)(\"div\",{className:t.a.helpIcon,children:Object(r.jsx)(i.a,{width:18,height:18})}),Object(r.jsx)(\"span\",{children:\"Help Center\"})]})]})}}},[[\"owYu\",0,1,3,5,4,2,6,7,8]]]);","extractedComments":[]}